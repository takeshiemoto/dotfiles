#!/bin/bash

CONTAINER_NAME="php-container"

# Get current working directory path ğŸ—‚
WORK_DIR=$(pwd)

# Check if container exists ğŸ”
if ! docker ps -a | grep -q $CONTAINER_NAME; then
    echo "âœ¨ Creating PHP container..."
    docker run -d --name $CONTAINER_NAME \
        -v /Users:/Users \
        -v "${HOME}/.composer:/root/.composer" \
        php:8.4-rc-cli tail -f /dev/null
fi

# Start container if not running ğŸš€
if ! docker ps | grep -q $CONTAINER_NAME; then
    echo "ğŸ”Œ Starting PHP container..."
    docker start $CONTAINER_NAME
fi

# Execute Composer command ğŸ¼
docker exec -w "$WORK_DIR" -i $CONTAINER_NAME composer "$@"
